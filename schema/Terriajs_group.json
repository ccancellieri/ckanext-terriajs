{
  "id": "terriajs-connector",
  "title": "Terria view connector",
  "$ref": "#/definitions/terriajs-group",
  "definitions": {
    "terriajs-group": {
      "title": "terriajs-group",
      "type": "object",
      "format": "categories",
      "basicCategoryTitle": "Main",
      "options": {
        "disable_collapse": false,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "required": [
        "id","type","name","items"
      ],
      "properties":{
        "id":{
          "title": "id",
          "minLength": 36,
          "type":"string",
          "description": "uuid",

          "links": [
            {
              "href": "https://www.uuidgenerator.net/version4",
              "mediaType": "text/html",
              "rel": "generator..."
            }
          ]
        },
        "type": {
          "type": "string",
          "enum": [
            "terriajs-group"
          ],
          "options": {
            "hidden": true
          }
        },
        "name": {
          "title": "Name",
          "minLength": 1,
          "type": "string"
        },
        "description": {
          "title": "Description",
          "type": "string",
          "format": "jodit"
        },
        "preserveOrder": {
          "title": "Preserve order",
          "type": "boolean",
          "format": "checkbox",
          "default": true
        },
        "items":{
          "type":"array",
          "options": {
              "enable_array_copy": false
          },
          "minItems": 1,
          "items":{
            "headerTemplate": "{{ i1 }} - {{self.name}}",
            "required": [
              "type"
            ],
            "oneOf":[
              {
                "$ref": "#/definitions/terriajs-view"
              },
              {
                "$ref": "#/definitions/remote-config-item"
              },
              {
                "$ref": "#/definitions/remote-config-group"
              },
              {
                "$ref": "#/definitions/terriajs-group"
              }
            ]
          }
        }
      }
    },
    "terriajs-view": {
      "title": "terriajs-view",
      "id": "terriajs-view",
      "type": "object",
      "format": "grid-strict",
      "required": [
        "type","id","name"
      ],
      "options": {
        "disable_collapse": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties":{
        "type":{ 
          "type":"string",
          "enum":["terriajs-view"],
          "options": {
            "hidden": true,
            "grid_columns": 0
          }
        },
        "id":{
          "title": "Id",
          "type": "string",
          "description": "Target Ckan terriajs view ID (autocomplete)",
          "format": "autocomplete",
          "minLength": 36,
          "options": {
              "autocomplete": {
                  "search": "view_search",
                  "getResultValue": "view_getValue",
                  "renderResult": "view_renderer",
                  "autoSelect": true
              },
              "grid_columns": 6
          },
          "links": [
            {
              "href": "/terriajs/config/{{self}}.json",
              "mediaType": "application/json",
              "rel": "go to..."
            }
          ]
        },
        "name":{
          "title": "Name",
          "type": "string",
          "format": "string",
          "description": "Auto generated descriptive name",
          "watch": {
            "id": "terriajs-view.id"
          },
          "template": "view_template",
          "options": {
            "grid_columns": 6
          }
        }
      }
    },
    "remote-config-item": {
      "description": "This catalog item can be used to load a single catalog item from a remote source.",
      "type": "object",
      "title": "remote-config-item",
      "format": "grid-strict",
      "required": [
        "type","url","name"
      ],
      "options": {
        "disable_collapse": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties":{
        "type":{ 
          "type":"string",
          "enum":["remote-config-item"],
          "options": {
            "hidden": true,
            "grid_columns": 0
          }
        },
        "name":{
          "title": "name",
          "type": "string",
          "minLength": 1,
          "options": {
            "grid_columns": 4
          }
        },
        "url":{
          "title": "url",
          "type": "string",
          "format": "url",
          "description": "The url to a Terriajs to lazily load (loaded on click)",
          "options": {
            "grid_columns": 8
          }
        }
      }
    },
    "remote-config-group": {
      "type": "object",
      "title": "remote-config-group",
      "format": "grid-strict",
      "required": [
        "type","url","name"
      ],
      "options": {
        "disable_collapse": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties":{
        "type":{ 
          "type":"string",
          "enum":["remote-config-group"],
          "options": {
            "hidden": true,
            "grid_columns": 0
          }
        },
        "name":{
          "title": "name",
          "type": "string",
          "minLength": 1,
          "options": {
            "grid_columns": 4
          }
        },
        "url":{
          "title": "url",
          "type": "string",
          "format": "url",
          "description": "The URL from where the system fetches the configuration from. The url should return a valid terriajs configuration that contains either items or catalog in the JSON structure returned at the top level. Camera definition is not required (and has no effect) by this implementation.",
          "options": {
            "grid_columns": 8
          }
        }
      }
    }
  }
}
